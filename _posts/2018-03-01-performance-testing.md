---
title : 성능 테스트
layout: post
---

## [Chapter 1] 성능 테스트의 정의 

### 효과  
- 병목현상 식별
- 미래 테스트를 위한 baseline 설립
- 요구사항과 성과 목표 준수 여부를 확인
- 전반적인 품질과 관련된 중요한 결정을 하는데 도움을 주는 데이터 수집
- 하드웨어 구성 예측에 도움

### 하는 이유  
- 배포 준비상태 평가 : 배포 전에 성능, 응답 시간 측정. 성능 부실로 인한 브랜드 이미지 하락 방지.
- 인프라 적합성 평가 : 용량의 적절성 평가. 안정성의 수용성, 인프라 용량, 자원, 시스템 결정.
- SW 성능의 적절성 평가 : SW 변경 전후, 현재와 원하는 성능간 특성 비교
- 성능 조정의 효율성 향상 : 다양한 부하 수준에서의 동작 비교, 병목 현상 식별, 시스템 조정여부와 시기를 결정하기 위한 데이터 제공.  

### 프로젝트 문맥 (Project Context)  
성공적으로 성능 테스트를 하려면 테스트 자체가 프로젝트 컨텍스트와 관련이 있어야 함.  
- 프로젝트 전망   
  테스트 시작 전 프로젝트의 전망 이해.  
  정기적으로 재검토.
- 시스템의 목적  
  해당 응용 프로그램, 시스템의 목적을 이해.  
  의도, 배포된 HW, SW 아키텍처, 사용자의 특성을 이해.  
- 고객, 사용자의 기대  
  단순히 요구 사항을 만족할 것이 아닌 고객이나 사용자의 만족도의 기대치를 기준을 만족.  
- 비즈니스 드라이버  
  비즈니스 기회, 요구와 같은 비즈니스 드라이버 이해.  
  시간, 예산 내에서 비즈니스 요구사항을 충족시키는 것이 중요.  
- 성능 테스트의 이유  
  프로젝트 초반에 성능 테스트를 하는 이유를 이해.  
- 프로젝트에 가져다주는 가치  
  성능 테스트가 프로젝트에서 성능 테스트가 어떠한 가치를 가질지에 대해 이해.  
  활동, 우선 순위를 조정해서 어떤 성능 테스트가 효과적인지 판단.  
- 프로젝트 관리 및 직원 배치  
  프로젝트 팀의 조직, 운영, 의사소통 기술 이해.
- 방법  
  프로세스 이해, 성능 테스트에 어떻게 적용되는지 이해.
- 준수 기준  
  프로젝트와 관련된 규제 요구 사항 이해. 
- 프로젝트 일정  
  시작 및 종료일, HW와 환경 사용가능한 날짜, 빌드와 배포 흐름, 프로젝트에서 체크 포인트와 마일스톤 이해.

---
## [Chapter 2] 테스트의 종류 

### Web application을 위한 성능 테스팅
1. 성능 테스트(Performance test)  
  응답성, 속도, 확장성, 안정성을 결정하거나 검증.  
  사용자가 프로그램의 성능 특성에 만족하는지에 중점을 둠.   
  성능의 기대와 현실의 불일치를 확인.  
  튜닝, 용량 계획 및 최적화 작업을 지원.  
  when? 제품의 품질을 확인할 때 사용.

1. 부하 테스트(Load test)  
  정상이거나 최대 로드 상태에서 프로그램 동작을 확인한다.  
  프로그램이 성능 목표를 충족시키는지 확인.  
  응답 시간, 처리 속도, 자원 사용 수준 측정.  
  일정 시간 동안 부하를 가하여 서버가 처리할 수 있는 부하 감지.  
  HW, 로드 밸런서 적합성을 결정합니다.  
  동시성 문제, 로드 중 기능 오류를 감지.  
  when? 성능 저하가 발견될 때 사용.  

1. 내구성 테스트(Endurance test)  
  부하 테스트의 하위 테스트.  
  장기간에 걸쳐 부하를 가하여 안정성을 검증  
  MTBF(Mean Time Between Failure), MTTF(Mean Time To Failure)을 계산하는데 사용됨.    
  when? 오랜 시간 유지보수 없이 견뎌야 하는 시스템에 사용.

1. 스트레스 테스트(Stress test)  
  정상 이상의 부하일 때 프로그램의 동작을 확인한다.  
  동기화 문제, 경쟁 상태(race condition), 메모리 누수(MEMORY LEAKS) 확인.  
  오류 유발 전에 프로그램이 얼마나 많이 부하를 초과하는지 평가.  
  스트레스가 많은 환경에서 보안에 취약하지 않는지 확인.  
  HW나 다른 프로그램의 오류의 부작용을 확인.  
  스파이크 테스트(Spike test) : 순간적으로 부하를 줘서 테스트.  
  when? 특정 시간에 부하가 많을 것 같은 시스템에 사용. EX) 티케팅  

1. 용량 테스트(Capacity test)  
  프로그램이 얼마나 많은 유저와 트랜잭션을 제공하고 성능을 충족시킬지 결정  
  스케일 업이나 스케일 아웃을 해야하는지 결정하는데 도움을 줌  
  요구 사항을 충족하기 위한 작업 부하 처리에 대한 정보를 제공  
  시스템의 현재 사용량, 용량 결정  
  when? 시스템의 사용량이 차서 스케일 아웃을 진행해야 할 때 사용.  

추가 개념  
  - 구성 요소 테스트  
    응용 프로그램의 아키텍처 구성 요소를 대상으로 하는 성능 테스트.  
    서버, DB, 네트워크, 방화벽, 클라이언트, 저장 장치를 주로 테스트.    
  - 조사  
    품질과 관련있는 프로그램의 속도, 확장성, 안정성 특성에 초점.  
    발생된 성능 문제의 원인에 대한 가설의 입증, 반증을 위해 자주 사용.  
  - 연기 테스트  
    성능 테스트의 초기에 실행.  
    응용 프로그램이 정상적인 부하에서 작업을 수행 할 수 있는지 확인.    
  - 단위 테스트  
    코드 모듈을 테스트.  
    코드 모듈에는 함수, 프로시저, 루틴, 객체, 메서드, 클래스 포함.  
    해당 코드 모듈을 작성한 개발자가 실행.  
  - 유효성 검사 테스트  
    프로그램의 속도, 확장성, 안정성 검사.   

---
## [Chapter 3] 성능테스트 시 위험사항 

성능테스트에서 프로젝트 위험과 완화 전략을 식별하는 것은 전체적 관점에서 봤을 때 의미있고 시간을 절약하는 방법이다.  

### 1. 속도 (speed)  
최종 사용자 관점. 특정 비즈니스, 데이터의 위험 요인이기도 함.  

  - 최종 사용자가 만족할만큼 충분한 속도를 내고 있는가.  
  - 비즈니스가 수집된 데이터가 쓸모없게 되기 전에 처리하거나 활용할 수 있는가.  
  - 프로그램이 사용자에게 가장 최신 정보를 제공할 수 있는가.  
  - 최대 응답 시간 안에 서비스가 응답하는가.  
  
완화 전략  
  - 성능 요구조건이 다른 사람이 아닌 실제 사용자의 요구를 나타나는지 확인하라.  
  - 비교를 이전 버전이나 경쟁 프로그램과 하라.  
  - 부하 테스트는 정상이나 피크 타임 때를 가정하여 설계하라.  
  - 실제와 유사한 데이터 타입, 분포, 용량으로 성능 테스트를 하라.
  - 가장 큰 부하를 받을 때 만족도에 대해 피드백을 요청하라.  
  - 시간이 중요한 트랜잭션을 성능테스트에 포함하라.
  - 성능테스트 중 하나 이상이 주기적인 프로세스가 실행하는 중에 실행되는지 확인하라.  
  - 다양한 조건, 로드 레벨, 혼합된 시나리오에서 속도를 측정하라.  
  - 올바른 데이터가 표시되고 저장되는지 확인하라.  

### 2. 확장성 (scalability)  
비즈니스적 관점. 

  - 일관되고 수용 가능한 반응 시간을 제공하는가.  
  - 생명주기 동안 수집되는 데이터를 모두 저장할 수 있는가.  
  - 최대 용량에 다가가는 것을 warning 신호가 있는가.  
  - 과도한 사용에도 보안이 유지되는가.  
  - 과도한 사용에도 기능이 동작하는가.  
  - 프로그램이 최고 부하를 견딜 수 있는가.  

### 3. 안정성 (stability) : 기술, 유지보수 관점  
신뢰성, 가동 시간, 복구 가능성 같은 영역을 포함하는 포괄적 관점.  

  - 데이터 손상,재구동 없이 오랜 시간동안 실행가능한가.  
  - 예기치못한 작동중지가 발생했을 때 부분 완료된 트랜잭션은 어떻게 되는가.  
  - 프로그램이 온라인 상태로 다시 전환되었을 때 사용자가 기대하는 화면을 보여주는가.  
  - 오류들로 시스템 충돌이 일어날 수 있는가.  
  - 시스템 전체에 부작용을 일으키는 트랜잭션이 있는가.  
  - 로드 밸런싱 환경에서 하나의 서버를 내렸을 때도 중단없이 서비스를 제공하는가.  
  - 시스템을 내리지 않고 패치나 업데이트를 할 수 있는가.  

---
## [Part 2] 성능테스트 시 필요한 작업들  

### 핵심 성능 테스팅 활동  
1. 테스트 환경 식별  
  production 환경, 도구, 자원 식별.  
  테스트 환경에서 사용가능한 HW, SW, NW 환경파악.
2. 허용 성능 기준 식별  
  사용자[응답 시간(response time), 처리량(througput)],  시스템[자원 활용 목표, 제약사항] 식별.  
3. 테스트 계획, 설계  
  주요 시나리오 식별, 변동성 결정 & 시뮬레이션 하는 방법, 테스트 데이터 결정, 수집할 측정 항목(metrics) 설정.
4. 테스트 환경 구성  
  테스트 환경, 도구, 자원 준비.
5. 테스트 설계 구현  
  설계에 따라 성능 테스트 개발.
6. 테스트 실행  
  테스트 실행, 모니터링.  
  테스트, 테스트 데이터, 수집된 결과 유효성 체크.  
7. 결과 분석, 보고서 작성, 재테스트  
  개별적이나 CFT(Cross-Functional Team. 상호기능팀) 로서 결과를 분석.  
  모든 측정 항목들이 허용 가능한 범위 내이고 모든 임계값을 어기지 않았으며 원하는 정보를 수집했으면 특정 시나리오에 대한 테스트를 마친다.
  
### 반복 성능 테스트 활동  
1. 프로젝트 비전, 상황 이해  
1. 성능 테스트 이유 식별  
1. 성능 테스트 가치 식별  
1. 테스트 환경 구성  
1. Task 식별, 조정  
1. Task 실행  
1. 결과 분석, 보고서 작성  
1. 1~3 활동의 성능 수용 기준 고려  
  반복 작업간에 기본 정보가 변경되지 않았는지 확인.  
  고객 피드백과 같은 새로운 정보를 통합하고 필요하면 전략 업데이트.  
1. Task 우선순위 재수립  
  테스트 결과, 새로운 정보, 가용성을 기반으로 전략에서 작업 우선 순위를 재지정하거나 추가 삭제하고 활동 5로 돌아감.  
  
---

## [Part 3] 테스트 환경  

### 시스템 평가를 위한 접근법  
- 사용자 지향 기능 식별.  
- 사용자가 시작하지 않은 프로세스, 기능 식별.  
- 사용자 활동 예상.  
- 테스트, 프로덕션 아키텍처 모델 개발.  
- 실사용자 환경의 모델 개발.  
- 아키텍처를 사용하는 다른 프로세스, 시스템 확인.  

### 시스템 기능, 비즈니스 절차 식별  
성능 수용 기준 구축에 도움되는 시스템의 핵심 기능 식별.  
작업 부하 모델을 평가해 수용 기준과 시스템 기능 모음 검증 가능.  
유용한 리소스 : 이해 관계자 인터뷰, 계약서, 비슷한 프로그램 사용 방법과 경험, 고객의 기대, 디자인 문서, 상태 전이 다이어그램, 프로젝트 계획서, 비즈니스 프로세스  

### 사용자 활동 식별  
가능한 사용자 활동 판별.  
유용한 리소스 : 유사 프로그램 사용 방법과 경험, 고객의 기대, 이해 관계자 인터뷰, 마케팅 자료, 도움말이나 사용자 문서, 고객 조직도, NW나 프로그램 보안 매트릭스, 과거 데이터, 주요 비즈니스 주기.  

### 논리적, 물리적 아키텍처 식별  
응용 프로그램과 HW, SW 구조 사이의 관계를 식별.  
특정 관심 영역을 해결, 성능 병목 현상을 발견하기 위한 성능 테스트 설계 시 중요.  
- 논리적 구조 : 웹 기반 응용 프로그램의 3계층 아키텍처(클라이언트 계층, 프레젠테이션 계층, 데이터 저장소 계층)  
- 물리적 아키텍처 : 다이어그램에서 표현됨.  
- 시스템 구조 : 실제 논리적, 물리적 아키텍처 통합한 것.  

---

## [Part 4] 성능테스트의 목적

> ### 성능 테스트 목적 결정 

### 성능 테스트 목적 결정
- 응용 프로그램이 계약, 규정, SLA(Service Level Agreement)를 준수하는지 확인.  
- 조정할 병목 현상 감지.  
- 다양한 구성 옵션의 성능 특성을 결정할 수 있게 개발 팀을 지원.  
- 확장성, 용량 계획을 위한 입력 데이터 제공.  
- 애플리케이션이 프로덕션 환경에 배포할 준비가 되었는지 판단.  

### 프로젝트 계획 검토
팀원, 그룹과 프로젝트 계획을 검토.  
- 아키텍처, HW 변경이 필요한가.  
- 변경과 관련된 성능 예산, 임계값이 있는가.  
- 있다면 테스트가 필요한가, 임계값을 충족시키지 못하면 어떤 결과를 초래하는가.  
- 다른 테스트에 영향을 미치는가.  
- 변화와 관련된 위험, 중대한 우려는 무엇인가.  
- 변화가 효과가 없다면 어떤 결과가 생기는가. 

### 아키텍처 검토
  개별 팀, 소규모 그룹과 물리적, 논리적 아키텍처를 검토.  

### 리소스 사용 대상 및 임계값 캡처 또는 예측
  - 프로덕션 지원 팀과 상의하여 측정할 항목, 임계값 설정.
  - 기술에 대한 핵심 성과 지표(HW, 디스크, 메모리, 프로세서) 확인.  
  - 비즈니스 요구 사항에 맞는 주요 성능 지표 사용.
  - 비즈니스 지표로 작업.
  - 이해 관계자와 협력.

### 자원 예산 캡처 또는 예측
  - 프로젝트 문서 검토.
  - 개발자, 설계자 회의에 참석.
  - 사용 중인 기술의 상태를 나타내는 핵심 성과 지표 임계값을 함께 작업.
  - 비즈니스 요구사항 충족 여부를 나타내는 비즈니스 지표로 작업.  

### 지표 식별 
  - 때때로 관련 지표가 너무 명확하지 않거나 수집하기가 쉽지 않음.  
  - 목표가 충족되는지 그리드, 스프레드 시트 작성.
  - 개발자, 설계자 및 관리자와 긴밀하게 협력

> ### 사용자 응답 시간 목표 지정  

### 사용자 응답 시간 정량화
- 성능 요건  
  계약상 의무, SLA, 고정된 비즈니스 요구 사항으로 인해 절대 협상이 불가능한 기준.
- 성과 목표  
  제품 출시 전 팀이 충족하고자 하는 기준.  
  
1. 애플리케이션 기능 및 사용량 확인 
  성능을 특성화하려는 시나리오 식별.
  - 자주 사용되는 시나리오 
  - 성능 집약적 시나리오 
  - 비즈니스에 중요한 시나리오 
  - 특별한 관심사 시나리오

2. 성능 요구 사항 및 목표 파악
  - 소프트웨어 개발 수명 주기의 초기 단계에 수행하는 것이 바람직.  
  - 프로젝트 전반에 걸쳐 주기적으로 다시 검토하는 것도 중요.

3. 성능 요구 사항 및 목표 정량화 
  - 요구 사항을 목표와 분리.  
  - 수집된 성능 목표의 수를 정량화  
  - 수집된 성능 요구 사항 정량화  

4. 성능 요구 사항 및 목표 기록  
  - 목표, 요구 사항을 기록 방법은 다양.  
  - 정량적 버전, 정성적 버전을 함께 기록.

> ### 다양한 유형의 성능 수용 기준 통합

합격 기준 통합 접근법

1. 최종 사용자 요구사항 조사  
  - 사용자가 성능 저하로 인한 불편을 느끼면 안됨.  
  - 프로토 타입이나 데모로 각 페이지, 화면, 그래픽, 목록의 로드 시간을 제어할 수 있음.  
  - 사용자에게 각 버전별로 테스트해보고 적절한 속도인지를 판단하도록 요청.

2. 비즈니스 요구 사항 수집  
  - 예산 범위 내에 필요한 시간에 맞춰 충족.

3. 기술 요구 사항 결정  
- 성능 테스트의 목적 결정.  
- 자원 사용 목표, 임계값을 캡처하거나 추정.  
- 리소스 예산 또는 할당을 캡처하거나 추정.  
- 측정 지표 식별.  
- 결과 전달.  
- 변화하는 목표, 예산 파악.  

4. 연구 표준, 준수 및 계약  
  - 이 범주의 성능 특성은 사용자 만족도, 예산, 일정, 기술에 큰 영향을 미치는지 여부에 관계 없이 협상 가능성이 가장 작음.  

5. 성능 테스트 목표 수립  
  - 성능 테스터가 항상 명시적, 묵시적 목적에 쉽게 접근할 수 없으므로 자주 목표를 체계적으로 검색해야 함.

6. 성능 특성 비교 및 통합   
  - 최종 사용자 및 규정 준수 요구 사항을 달성하는 데 필요한 기술적 특성 결정. 
  - 결정된 특성을 기존에 수집된 기술 요구 사항과 비교.  
  - 수정된 기술 요구 사항을 달성하기 위한 계획, 자원, 비용 추정.  
  - 성능 테스트 수행을 위한 전반적 목표를 검토, 해당 테스트 목표가 기술 요건, 업무 요구 사항을 지원하는지 확인.

7. 성능 계획 검토 및 업데이트   
  - 개발 주기 동안 애플리케이션 설계, 성능 계획, 성능 요구 사항을 잠재적으로 업데이트할 때마다 이 프로세스를 여러번 반복할 수 있음.
  - 한 번에 완벽할 수는 없음.  
  - 프로그램이 실행된 후 설계, 계획 및 요구 사항을 함께 동기화하여 사용자와 이해 당사자가 만족스럽도록 유지하는 것이 중요.  

---

## [Part 5] 테스트의 계획과 디자인

> ### 응용 프로그램 사용 모델링  

  웹 부하 테스트의 목적은 현실적으로 사용자 경험을 시뮬레이션 하는 것. 
  현실을 정확하게 표현하려면 비즈니스 컨텍스트(어플리케이션 사용, 트랜잭션 수, 사용자 경로)를 이해해야 함.  
  성능에 대한 예측과 성능 최적화의 우선 순위 지정이 가능.  

### 응용 프로그램 사용 모델링을 위한 접근법

  워크 로드 모델링 : 한 개 이상의 복합적인 어플리케이션 사용 프로필을 식별.  

1. 목표 확인
- 시간에 따라 예상되는 비즈니스 볼륨은 어느정도인가.  
- 현재, 예상되는 최대 부하는 어느정도인가.  
- 최대 부하 수준에는 얼마나 빨리 도달 할 것인가.  
- 최대 부하 수준은 얼마나 지속되는가.  

2. 주요 시나리오 확인
- 계약상 의무가 있는 사용 시나리오를 포함.  
- 성능 테스트의 목적에 의해 묵시적으로 의무화된 사용 시나리오를 포함.  
- 일반적인, 업무상 중요한, 성능 집약적인 사용 시나리오를 포함.  
- 기술 관련, 이해 관계자 관심사에 대한 사용 시나리오를 포함.  
- 가시성이 높은 시나리오를 포함.

3. 주요 시나리오의 탐색 경로 결정
시나리오와 관련된 작업, 활동을 실제로 수행하는 방법 결정.
- 중요한 성능 영향을 일으킬 것으로 예상되거나 하나 이상의 주요 시나리오를 수행할 것으로 예상되는 경로 식별.  
- 디자인, 사용 설명서 읽기.  
- 직접 활동 시도.  
- 다른 사람의 활동을 수행하는 것을 관찰.  

4. 개별 사용자 데이터, 분산 결정
사용자를 상호 교환 가능한 엔터티로 생각하면 테스트의 설계 및 분석이 쉬워지고 성능 문제의 일부 클래스를 쉽게 탐지 가능.  
하지만 프로덕션 환경에서의 현실적 복잡성을 숨김.  
이런 복잡성을 계산, 시뮬레이션 하는 것이 성능 문제, 프로덕션 환경에서의 성능 예측에 필수.  
웹 로그의 웹 사이트 메트릭
  - 기간별 페이지 뷰
  - 기간별 사용자 세션
  - 세션 기간
  - 페이지 요청 배포
  - 상호 작용 속도
  - 사용자 포기

5. 시나리오 상대 분포 결정
시뮬레이션 할 시나리오, 해당 시나리오에 대한 단계, 관련 데이터를 결정.  
이를 워크 로드 모델로 통합한 후 사용자가 모델에 표시된 각 활동을 다른 활동과 비교하여 수행하는 빈도를 결정.

6. 목표 부하 수준 확인
웹사이트에 대한 방문은 사용자 세션 요청으로 구성됨.  
동일 웹 사이트를 탐색하는 사용자는 세션 중 웹 서버에 중복 요청을 하지 않을 것임.  
따라서 세션에 모델을 적용하는 것이 동시 사용자를 기반으로 사용자 경험을 모델링 하는 것보다 더 유용.  
  
7. 모델 구현 준비
워크로드 모델을 구현하기 위해서 스크립트를 작성이 일반적.  
- 모델 구현이 어려우므로 충분히 생각하지 않고 모델을 변경하지 마라. 
- 모델 설계대로 구현할 수 없으면 구현 한 모델에 대한 세부 정보 기록. 
- 수집할 측정 지표 식별, 측정 지표 수집 방법 결정.  

> ### 개별 사용자 데이터, 분산 결정  

### 사용자 지연
  사용자를 정확하게 모델링하면 믿을 수 있는 테스트 결과가 생성됨.      
  세션 중 사용자는 여러 가지 상태에 있을 수 있으므로 사용자 지연 모델링 고려.  
  페이지 흐름, 방문 빈도, 사용자가 페이지를 보는 중 일시 중지하는 시간, 사용자가 웹 사이트와 상호 작용하는 방법에 대한 요소들을 기반으로 모델링하는 것이 사용자 동작을 특성화하는데 필요함.  

### 개별 사용자 데이터 결정
  개별 사용자가 실제로 해당 시나리오와 관련된 작업, 활동을 수행하는 방법과 관련된 사용자별 데이터를 결정.  
  탐색 경로 뿐만 아니라 워크로드 모델을 구현하려면 다른 정보가 필요.  

  - 사용자가 페이지에 머문 시간은 얼마나 되는가.  
  - 각 페이지에 어떤 데이터를 입력해야 하는가.  
  - 어떤 조건으로 사용자가 탐색 경로을 변경 가능한가.  

  사용자 고유 데이터를 식별 시

  - 대량의 데이터를 사용하므로 충분한 데이터가 있는지 확인.  
  - 잘못된 데이터를 포함.  
  - 최고의 테스트 데이터는 프로덕션 DB, 로그에서 수집된 데이터.
  - 클라이언트 캐싱을 고려.

### 사용자 포기
  성능 저하로 사용자가 작업을 완료하기 전에 웹 사이트를 종료하는 상황.  
  부하 테스트는 성능 저하로 인해 웹 사이트를 포기할 수 있는 사용자 수 보고.  
  일부 사용자를 잃는 대신 성능을 복구하는 자체 정책 메커니즘을 만듬.  
  사용자를 잃기 전에 어플리케이션이 유지가능한 사용자 수를 결정.

  - 응답 시간을 평가하기 전에 포기율 확인. (2% 미만이 이상적)
  - 포기한 사용자는 부하를 발생시키므로 부하에 대한 결론 도출 전에 포기율을 확인.  
  - 포기율이 20% 이상인 경우 포기 루틴을 비활성화, 테스트를 다시 실행해서 문제 원인 알아냄.  

---

## [Part 6] 테스트 실행 

> ### 테스트 환경 검증  

  테스트 환경에서 production 환경을 최대한 가깝게 미러링하기 위함.  
  테스트 수행 전 테스트 환경 설정이 구성, 설계와 같은지 검증.  
  다르다면 테스트가 정상 작동하지 않거나 잘못된 결과를 발생.  
 
  - 테스트 환경의 구성 확인.  
  - 잘못된 데이터를 얻는 것을 방지하기 위해 백신 프로그램을 정지.  +
  - 보통 다른 요청을 처리하는 중에 진행하므로 백그라운드 시뮬레이션도 고려.  
  - 네트워크 문제 파악을 위해 먼저 다른 계층과 별도로 웹 서버 계층의 유효성 검사.  
  - 데이터 읽기로만 제한되는 시나리오로 DB의 유효성 검사.  
  - 테스트 환경을 검증하기 위해 데이터베이스 갱신과 삽입을 포함한 복잡한 시나리오를 실행한다.  
  - 모든 서버의 KPI(핵심 성능 지표)를 사용해  테스트 환경(프로세서, 네트워크, 디스크, 메모리)평가.  

> ### 테스트 유효성 검사  

  결과를 제대로 해석하기 위해 부하 시뮬레이션은 테스트 설계를 정확히 반영해야 함.  
  테스트 설계를 제대로 반영하지 않아도 잘못된 결과가 나올 수 있음.  
  따라서 테스트 유효성을 확인해야 함.  

  - 테스트 설계 구현  
    테스트를 실행 후 기대한대로 동작하는지 확인.  
  - 동시성  
    여러 사용자가 각자 다른 데이터로 테스트 실행. 
    다양하고 복잡한 경우의 수를 검사하게 됨.  
  - 테스트의 조합  
    다른 테스트들과 조합하여 테스트가 정확히 실행되는지 검증.
    디버깅 하는 데 시간을 낭비하는 것을 테스트 실행 전 복잡한 테스트가 정확히 설계, 구현되었는지 확인.   
  - 테스트 데이터 검증  
    성능 테스트는 수많은 데이터를 사용하기 때문에 데이터 안에는 에러가 발생할 수 있는 가능성이 내포되어 있음.  
    테스트 중인 데이터가 의도한대로 테스트가 수행될 수 있는 올바른 데이터가 포함되는지 확인.  

> ### 테스트 실행  

  높은 우선 순위에 있는 성능 테스트부터 테스트를 시작.  
  테스트 중 일어나고 있는 일에 대한 정보 취하여 테스트 로그에 추가.  
  시스템 오류, 어플리케이션 예외나 오류, 네트워크 문제, 디스크 공간 문제를 해결 가능.  
  최종 테스트를 완료 후 테스트 환경 해제하기 전에 테스트 결과, 성능 로그를 저장했는지 확인. 

  - 오류 해결, 디버깅하는 시간 미리 계획.  
  - 결과 즉시 분석 후 계획 수정.  
  - 테스트 결과를 팀에게 공개.  
  - 결과, 반복적으로 해야 할 일들 기록.
  - 어느 시점에 프로그램의 용량, 부하에 스트레스를 가함.  

> ### 기준선, 벤치마크  

  - 기준선(baseline)
    성능의 향상 여부, 빌드나 버전간의 편차를 찾을 수 있음.  
  - 벤치마킹
    시스템 성능을 다른 조직에서 보증하는 산업 표준과 비교하는 프로세스.  

> ### 아카이브 테스트  

  변경, 버전 관리는 테스트의 데이터 변경을 관리하고 차이를 전달하는데 유용.  
  테스트 스크립트, 결과 및 보고서를 저장하거나 주기적으로 날짜가 지정된 폴더에 복사본을 저장하거나 성능 버전 제어 소프트웨어를 보유.  
  테스트 데이터, 결과를 저장하는 것이 성능 테스트를 진행하는 것보다 시간을 절약.

---

## [Part 7] 테스트 결과 분석

> ### 성능 테스터의 주요 수학 원리  

### 평균  
산술 평균, 평균이라고 함.  
정확한 성능을 알기 위해서 추가적으로 표본 크기, 최소 값, 최대 값, 표준 편차 필요.  
  
### 백분위  
통계를 정의보다 더 쉽게 보여줌.  

### 중위  
데이터 셋의 중간 값.  

### 표준 값  
데이터 셋에서 가장 많이 발생하는 단일 값.  

### 표준편차  
데이터 셋의 모든 측정의 약 상위 68 %를 포함하는 측정 세트 내의 분산 양.  
데이터 포인트가 평균 주위에 얼마나 밀집되는지 알 수 있음.  

### 균일 분포  
상한, 하한 사이에 균등하게 있는 랜덤 집합과 동일한 데이터 집합.  
데이터 셋에서 모든 수는 대략 동일한 횟수로 표시됨.  

### 정규 분포  
중앙에 밀집된 정규 분포 곡선을 나타내는 분포.  
사용자의 응답 시간은 정규 분포를 따름.  

### 통계의 가치  
추가적인 데이터들을 모아서 통계의 가치를 높일 수 있음.  

- 테스트 결과의 20% 이상 다른 테스트 결과와 다른 경우 테스트 환경, 프로그램, 테스트 자체에 문제가 있음.  
- 테스트 결과의 90번째 백분위 수가 다른 테스트 결과의 최대 값보다 크거나 최소값보다 작으면 데이터 셋은 유사하지 않음.  
- 테스트 측정 값이 다른 테스트 결과보다 나란히 표시될 때 유사하지 않음.  만약 테스트의 측정치가 다른 테스트의 결과보다 눈에띄게 높거나 낮다면, 아마도 통계적으로 같지 않을 것이다.

### 통계적 동일성
여러 테스트 결과가 80% 이상 같다면 통계적으로 동일.  

### 통계 이상점
수집된 측정치가 표준편차의 3배이상 많이 나거나 99% 이상일 때.  

### 신뢰 구간  
실제 통계가 주어진 확실성 수준 내에 위치할 가능성이 있는 통계 주변의 값 범위.  

> ### 성능 테스트 리포트 원리  

### 효과적인 보고 원칙  
- 일찍, 자주.  
- 시각적으로 : 통계 리포트, 데이터.  
- 직관적으로 : 직관적으로 이해 가능하게. 
- 적절한 통계 방법.  
- 올바른 데이터 통합 : 결과가 통합되어 그래프로 표현될 때 패턴 증명이 쉬워짐.  
- 효과적인 데이터 요약 :의미있는 패턴을 쉽게 보여줌.  
- 타겟에 맞게 커스터마이즈 : 기술 팀원, 비기술적 팀원, 이해관계자에 맞게 결과 보고서 표현 방법 변경.  
- 간결한 구두 요약  
- 사용가능한 데이터 생성 : 결과 데이터들을 적절히 사용, 분석하기 쉽게함.  

### 자주 보고되는 실적 데이터  
- 사용자 응답 시간 : 가장 일반적으로 요청, 측정 기중. 사용자 만족도 측정하는 척도.  
- 자원 활동 : 두 번째로 많이 요청.  
- 볼륨, 용량, 속도 : 대역폭, 처리량, 초당 트랜잭션, 초당 조회수, 지원되는 사용자 수, DB에 저장 가능한 레코드 수.  
- 구성 요소 응답 시간 : 개발자, 설계자, DBA, 관리자가 사용자 응답 시간을 담당하는 시스템 결정하는데에 도움.  
- 트렌드

---

## [Part 8] Load 테스트, Stress 테스트의 차이 

> ### 부하 테스트(Load Test)  

프로그램의 최대 작동 용량, 성능을 저하시킬 수있는 병목 현상을 식별.  
정상 및 예상 피크로드 조건에서 프로그램의 동작을 결정하는 데 사용.  
시작 시 작은 부하로 시작한 다음 부하를 점진적으로 최대로 증가.  
점진적으로 증가하는 부하 조건에서 프로그램이 수행하는 동작을 관찰.  
  
- 테스트 입력
  1. 성능이 중요한 사용 시나리오  
  1. 작업 부하 모델  
  1. 성능 수용 기준  
  1. 허용 기준과 관련된 성능 측정 항목  
  1. 디자이너, 개발자, 사용자, 운영자의 인터뷰 의견  

- 테스트 산출   
  1. 처리량, 응답 시간, 최대 사용자 수 및 리소스 사용률과 같은 다양한 성능 측정
  1. 화이트 박스 테스트 단계에서 분석해야 할 잠재적 병목 현상  
  1. 다양한 부하 레벨에서의 프로그램 동작  

> ### 스트레스 테스트(Stress Test)  

극한 상황에서만 발생할 수있는 잠재적인 문제를 식별.   
조건은 메모리, 프로세서 사이클, 네트워크 대역폭 및 디스크 용량과 같은 시스템 자원이 고갈된 이후부터 예측 불가능한 사용 패턴으로 인해 발생하는 과도한 부하까지 다양  

프로그램의 견고성, 안정성에 중점을 둔 목표, 사용자 시나리오를 중심으로 실행.  
올바른 방법론을 적용하는 것은 작업 부하 조건 재현, 주요 시나리오 재 작성 및 핵심 성과 지표의 해석에 따라 다름.  

- 테스트 입력  
  1. 이전 스트레스 테스트의 결과
  1. 프로그램 사용 특성 (시나리오)
  1. 극한 상황에서의 시나리오에 대한 걱정
  1. 부하 테스트에서 얻은 현재 최대 부하 용량  
  1. HW, NW 아키텍처 및 데이터
  1. 재난 위험 평가 (ex. 정전, 지진)

- 테스트 산출
  1. 스트레스가 많은 조건에서의 프로그램 측정  
  1. 스트레스 상황에서의 증상  
  1. 견고성, 가용성 및 안정성을 해결하는데 사용하는 정보  

- 사용 시나리오   
  1. 어플리케이션 스트레스 테스트(Application stress testing)  
    스트레스 받는 시스템에서 둘 이상의 트랜잭션에 초점.  
  2. 트랜잭션 스트레스 테스트(Transactional stress testing)  
    구성 요소 간 상호 작용 복잡성을 추가하지 않고 부하량을 초과하는 부하량으로 트랜잭션 수준에서 작업.    
  3. 시스템 스트레스 테스트(Systemic stress testing)  
    통합 스트레스 테스트(integration/consolidation stress test) 라고도 함.  
    서로 다른 프로그램이 서로를 차단하고 시스템 자원을 놓고 경쟁하는 상황에서 결함을 발견하기 위함.  

---

본 포스팅은 "Performance Testing Guidance for Web Applications"을 보고 정리한 내용입니다.

참고 : [Performance Testing Guidance for Web Applications][1]

[1]: https://msdn.microsoft.com/ko-kr/library/bb924375.aspx
